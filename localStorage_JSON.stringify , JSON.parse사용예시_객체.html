<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>LocalStorage ê°ì²´ ì €ì¥ ì˜ˆì‹œ</title>
  <style>
    * { box-sizing: border-box; }
    body {
      font-family: Arial, "ë§‘ì€ ê³ ë”•", sans-serif;
      padding: 30px;
      background: #f5f5f5;
    }
    .wrap {
      max-width: 480px;
      margin: 0 auto;
      padding: 20px;
      background: #fff;
      border-radius: 8px;
      border: 1px solid #ddd;
    }
    h1 {
      font-size: 20px;
      margin-bottom: 16px;
    }
    .form-row {
      margin-bottom: 12px;
    }
    .form-row label {
      display: block;
      margin-bottom: 4px;
      font-size: 14px;
    }
    .form-row input {
      width: 100%;
      padding: 8px;
      border: 1px solid #ccc;
      border-radius: 4px;
      font-size: 14px;
    }
    .btn-area {
      margin-top: 16px;
      display: flex;
      gap: 8px;
    }
    .btn-area button {
      flex: 1;
      padding: 8px 0;
      border: 0;
      border-radius: 4px;
      font-size: 14px;
      cursor: pointer;
    }
    .btn-save { background: #4caf50; color: #fff; }
    .btn-load { background: #2196f3; color: #fff; }
    .btn-clear { background: #f44336; color: #fff; }

    .result {
      margin-top: 20px;
      padding: 10px;
      border-radius: 4px;
      background: #fafafa;
      border: 1px solid #eee;
      font-size: 13px;
      line-height: 1.5;
      white-space: pre-line;
    }
  </style>
</head>
<body>

<div class="wrap">
  <h1>localStorage ê°ì²´ ì €ì¥ / ë¶ˆëŸ¬ì˜¤ê¸° ì˜ˆì‹œ</h1>

  <div class="form-row">
    <label for="name">ì´ë¦„</label>
    <input type="text" id="name" placeholder="ì˜ˆ: ê¹€íƒœì€">
  </div>

  <div class="form-row">
    <label for="age">ë‚˜ì´</label>
    <input type="number" id="age" placeholder="ì˜ˆ: 26">
  </div>

  <div class="form-row">
    <label for="job">ì§ì—…</label>
    <input type="text" id="job" placeholder="ì˜ˆ: í¼ë¸”ë¦¬ì…”">
  </div>

  <div class="btn-area">
    <button type="button" class="btn-save" id="btnSave">ì €ì¥í•˜ê¸°</button>
    <button type="button" class="btn-load" id="btnLoad">ë¶ˆëŸ¬ì˜¤ê¸°</button>
    <button type="button" class="btn-clear" id="btnClear">ì‚­ì œí•˜ê¸°</button>
  </div>

  <div class="result" id="resultBox">
    ì•„ì§ ì €ì¥ëœ ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤.
  </div>
</div>

<script>
  const STORAGE_KEY = 'userData';

  const $name = document.getElementById('name');
  const $age = document.getElementById('age');
  const $job = document.getElementById('job');
  const $result = document.getElementById('resultBox');

  const $btnSave = document.getElementById('btnSave');
  const $btnLoad = document.getElementById('btnLoad');
  const $btnClear = document.getElementById('btnClear');

  // ğŸ‘‰ í˜ì´ì§€ ìµœì´ˆ ë¡œë“œ ì‹œ ì €ì¥ëœ ê°’ì´ ìˆë‹¤ë©´ ìë™ìœ¼ë¡œ ë¶ˆëŸ¬ì˜¤ê¸°
  window.addEventListener('DOMContentLoaded', function () {
    loadUserData();
  });

  // ì €ì¥í•˜ê¸° ë²„íŠ¼
  $btnSave.addEventListener('click', function () {

    // ì…ë ¥ê°’ìœ¼ë¡œ object(ê°ì²´) ìƒì„±. {key: value, ...} í˜•íƒœëŠ” ê°ì²´í˜•íƒœì´ë‹¤!
    const userData = {
      name: $name.value.trim(),
      age: $age.value.trim(),
      job: $job.value.trim()
    };

    // JSON.stringifyë¡œ ê°ì²´ë¥¼ ë¬¸ìì—´ë¡œ ë³€í™˜í•´ì„œ ì €ì¥
    localStorage.setItem(STORAGE_KEY, JSON.stringify(userData));

    // JSON.stringifyì˜ í‘œì¤€í˜•íƒœ => JSON.stringify(value, replacer, space)
    // value: ë³€í™˜í•  ê°’  // userData ê°ì²´
    // replacer: (ì„ íƒì‚¬í•­) ë°°ì—´ ë˜ëŠ” í•¨ìˆ˜ë¡œ, ë³€í™˜í•  ì†ì„±ì„ ì§€ì •  //  null  //  ê°ì²´ ì „ì²´ë¥¼ ë¬¸ìì—´ë¡œ ë³€í™˜(ì¶”ê°€ í•„í„°ë§ ì—†ìŒ)
    // space: (ì„ íƒì‚¬í•­) ë“¤ì—¬ì“°ê¸°ìš© ê³µë°±ë¬¸ì ìˆ˜ ì§€ì •  //  2
    $result.textContent = 'ì €ì¥ ì™„ë£Œ!\n' + JSON.stringify(userData, null, 2);

    // ìœ„ ì²˜ëŸ¼ì´ ì•„ë‹ˆë¼ JSON.stringify(userData) ë§Œ í•´ë„ ë™ì¼í•˜ê²Œ ë™ì‘í•¨!  //  ê·¸ëŸ¬ë‚˜ {"name":"í™ê¸¸ë™","age":"25","job":"í¼ë¸”ë¦¬ì…”"} ì²˜ëŸ¼ í•œì¤„ë¡œ ë‚˜ì˜´!
    // ê°€ë…ì„±ì„ ìœ„í•´ ë“¤ì—¬ì“°ê¸° ì˜µì…˜ì„ ì¶”ê°€í•œ ê²ƒ!
    // **JSON.stringify()ëŠ” â€œìë°”ìŠ¤í¬ë¦½íŠ¸ ê°ì²´ â†’ ë¬¸ìì—´(String)ë¡œ ë³€í™˜í•´ì£¼ëŠ” ë©”ì†Œë“œâ€**
    // ì™œ ë¬¸ìì—´ë¡œ ì €ì¥í•˜ëŠëƒ??  // localStorage ì—ëŠ” ë¬¸ìì—´ í˜•íƒœë¡œë§Œ ì €ì¥ ê°€ëŠ¥í•˜ê¸° ë•Œë¬¸!  ë”°ë¼ì„œ, ê°ì²´ë‚˜ ë°°ì—´ ì €ì¥ì‹œ ë°˜ë“œì‹œ JSON.stringify()ë¡œ ë¬¸ìì—´ ë³€í™˜ í•„ìš”í•¨!
  });

  // ë¶ˆëŸ¬ì˜¤ê¸° ë²„íŠ¼
  $btnLoad.addEventListener('click', function () {
    loadUserData();
  });

  // ì‚­ì œí•˜ê¸° ë²„íŠ¼
  $btnClear.addEventListener('click', function () {
    localStorage.removeItem(STORAGE_KEY);
    $name.value = '';
    $age.value = '';
    $job.value = '';
    $result.textContent = 'ë°ì´í„°ë¥¼ ì‚­ì œí–ˆìŠµë‹ˆë‹¤.';
  });

  // ê³µí†µ: ì €ì¥ëœ ë°ì´í„° ë¶ˆëŸ¬ì˜¤ëŠ” í•¨ìˆ˜
  function loadUserData() {
    const saved = localStorage.getItem(STORAGE_KEY);

    if (!saved) {
      $result.textContent = 'ì €ì¥ëœ ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤.';
      return;
    }

    // JSON.parseë¡œ ë¬¸ìì—´ â†’ ê°ì²´ ë³€í™˜
    try {
      const data = JSON.parse(saved);

      // ì¸í’‹ì— ê°’ ì±„ìš°ê¸°
      $name.value = data.name || '';
      $age.value = data.age || '';
      $job.value = data.job || '';

      $result.textContent =
        'ë¶ˆëŸ¬ì˜¨ ë°ì´í„°:\n' +
        `ì´ë¦„: ${data.name}\në‚˜ì´: ${data.age}\nì§ì—…: ${data.job}`;
    } catch (e) {
      console.error('JSON íŒŒì‹± ì˜¤ë¥˜:', e);
      $result.textContent = 'ì €ì¥ëœ ë°ì´í„° í˜•ì‹ì´ ì˜¬ë°”ë¥´ì§€ ì•ŠìŠµë‹ˆë‹¤.';
    }
  }
</script>

</body>
</html>
